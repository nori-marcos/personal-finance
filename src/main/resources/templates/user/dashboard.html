<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="content">

    <div class="box has-background-light has-text-centered">
        <p class="heading">Saldo geral</p>
        <h1 class="title is-2" th:classappend="${dashboardData.totalBalance.doubleValue() < 0 ? 'has-text-danger' : ''}"
            th:text="'R$ ' + ${#numbers.formatDecimal(dashboardData.totalBalance, 1, 'POINT', 2, 'COMMA')}"></h1>
    </div>

    <div class="card" style="margin-top: 2rem;">
        <header class="card-header">
            <p class="card-header-title">Minhas Contas</p>
        </header>
        <div class="card-content">
            <div th:if="${#lists.isEmpty(dashboardData.accounts)}">
                <p>Nenhuma conta cadastrada.</p>
            </div>
            <div th:unless="${#lists.isEmpty(dashboardData.accounts)}">
                <div th:each="account : ${dashboardData.accounts}" class="account-item">
                    <div class="media">
                        <div class="media-left">
                           <span class="icon is-medium">
                               <i th:if="${account.accountType.name() == 'SAVINGS_ACCOUNT'}" class="fa-solid fa-piggy-bank"></i>
                               <i th:unless="${account.accountType.name() == 'SAVINGS_ACCOUNT'}" class="fa-solid fa-landmark"></i>
                           </span>
                        </div>
                        <div class="media-content">
                            <strong th:text="${account.name}">Nome da Conta</strong><br/>
                            <small th:text="${account.institution}">Instituição</small>
                        </div>
                        <div class="media-right">
                            <strong th:classappend="${account.balance.doubleValue() < 0 ? 'has-text-danger' : ''}"
                                    th:text="'R$ ' + ${#numbers.formatDecimal(account.balance, 1, 'POINT', 2, 'COMMA')}">
                            </strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="card-footer">
            <a href="#" class="card-footer-item is-hidden-touch" id="add-account-button">Adicionar conta</a>
            <a th:href="@{/accounts/new}" class="card-footer-item is-hidden-desktop">Adicionar conta</a>
        </footer>
    </div>

    <div class="card" style="margin-top: 2rem;">
        <header class="card-header">
            <p class="card-header-title">Meus Cartões</p>
        </header>
        <div class="card-content">
            <div th:if="${#lists.isEmpty(dashboardData.creditCards)}">
                <p>Nenhum cartão cadastrado.</p>
            </div>
            <div th:unless="${#lists.isEmpty(dashboardData.creditCards)}">
                <div th:each="card : ${dashboardData.creditCards}" class="account-item">
                    <div class="media">
                        <div class="media-left">
                            <span class="icon is-medium"><i class="fa-regular fa-credit-card"></i></span>
                        </div>
                        <div class="media-content">
                            <p class="title is-5" th:text="${card.name}">Nome do Cartão</p>
                        </div>
                    </div>
                    <div class="level is-mobile" style="margin-top: 0.75rem;">
                        <div class="level-item has-text-centered">
                            <div>
                                <p class="heading">Disponível</p>
                                <p class="title is-6" th:classappend="${card.availableLimit.doubleValue() < 0 ? 'has-text-danger' : ''}"
                                   th:text="'R$ ' + ${#numbers.formatDecimal(card.availableLimit, 1, 'POINT', 2, 'COMMA')}"></p>
                            </div>
                        </div>
                        <div class="level-item has-text-centered">
                            <div>
                                <p class="heading">Fatura atual</p>
                                <p class="title is-6 has-text-danger" th:text="'-R$ ' + ${#numbers.formatDecimal(card.currentInvoice, 1, 'POINT', 2, 'COMMA')}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="card-footer">
            <a href="#" class="card-footer-item is-hidden-touch" id="add-card-button">Adicionar cartão</a>
            <a th:href="@{/cards/new}" class="card-footer-item is-hidden-desktop">Adicionar cartão</a>
        </footer>
    </div>

    <div class="modal" id="add-account-modal">
    </div>
    <div class="modal" id="add-card-modal">
    </div>

</div>
</body>
</html>